
<p class="level0">
<p class="level0"><a name="NAME"></a><h2 class="nroffsh">NAME</h2>
<p class="level0">dpkg-source - Debian source package (.dsc) manipulation tool 
<p class="level0"><a name="SYNOPSIS"></a><h2 class="nroffsh">SYNOPSIS</h2>
<p class="level0"><span Class="bold">dpkg-source</span> 
<p class="level0">
<p class="level0"><a name="DESCRIPTION"></a><h2 class="nroffsh">DESCRIPTION</h2>
<p class="level0"><span Class="bold">dpkg-source</span> packs and unpacks Debian source archives. 
<p class="level0">None of these commands allow multiple options to be combined into one, and they do not allow the value for an option to be specified in a separate argument. 
<p class="level0"><a name="COMMANDS"></a><h2 class="nroffsh">COMMANDS</h2>
<p class="level0">
<p class="level0"><span Class="manpage">-x</span>, <span Class="manpage">--extract  \fIfilename\fP.dsc [\fIoutput-directory\fP]</span>Extract a source package. The <span Class="bold">--extract</span> alias was added in dpkg 1.17.14. One non-option argument must be supplied, the name of the Debian source control file 
<p class="level0">An optional second non-option argument may be supplied to specify the directory to extract the source package to, this must not exist. If no output directory is specified, the source package is extracted into a directory named <span Class="emphasis">source</span>-<span Class="emphasis">version</span> under the current working directory. 
<p class="level0"><span Class="bold">dpkg-source</span> will read the names of the other file(s) making up the source package from the control file; they are assumed to be in the same directory as the <span Class="manpage">.dsc .</span>
<p class="level0">The files in the extracted package will have their permissions and ownerships set to those which would have been expected if the files and directories had simply been created - directories and executable files will be 0777 and plain files will be 0666, both modified by the extractors' umask; if the parent directory is setgid then the extracted directories will be too, and all the files and directories will inherit its group ownership. 
<p class="level0">If the source package uses a non-standard format (currently this means all formats except "1.0"), its name will be stored in <a class="bold" href="#debiansourceformat">debian/source/format</a> so that the following builds of the source package use the same format by default. 
<p class="level0">
<p class="level0"><span Class="manpage">-b</span>, <span Class="manpage">--build  \fIdirectory\fP [\fIformat-specific-parameters\fP]</span>Build a source package. The <span Class="bold">--build</span> alias was added in dpkg 1.17.14. The first non-option argument is taken as the name of the directory containing the debianized source tree (i.e. with a debian sub-directory and maybe changes to the original files). Depending on the source package format used to build the package, additional parameters might be accepted. 
<p class="level0"><span Class="bold">dpkg-source</span> will build the source package with the first format found in this ordered list: the format indicated with the <span Class="emphasis">--format</span> command line option, the format indicated in <a class="bold" href="#debiansourceformat">debian/source/format</a>, "1.0". The fallback to "1.0" is deprecated and will be removed at some point in the future, you should always document the desired source format in <a class="bold" href="#debiansourceformat">debian/source/format</a>. See section <a class="bold" href="#SOURCE">SOURCE PACKAGE FORMATS</a> for an extensive description of the various source package formats. 
<p class="level0">
<p class="level0">
<p class="level0">Print the source format that would be used to build the source package if <span class="bold">dpkg-source --build <span Class="emphasis">directory</span> was called (in the same conditions and with the same parameters). 
<p class="level0">
<p class="level0">
<p class="level0">Run the corresponding hook of the source package format. This hook is called before any build of the package (<span Class="bold">dpkg-buildpackage</span> calls it very early even before <span Class="bold">debian/rules clean</span>). This command is idempotent and can be called multiple times. Not all source formats implement something in this hook, and those that do usually prepare the source tree for the build for example by ensuring that the Debian patches are applied. 
<p class="level0">
<p class="level0">
<p class="level0">Run the corresponding hook of the source package format. This hook is called after any build of the package (<span Class="bold">dpkg-buildpackage</span> calls it last). This command is idempotent and can be called multiple times. Not all source formats implement something in this hook, and those that do usually use it to undo what <span Class="bold">--before-build</span> has done. 
<p class="level0">
<p class="level0">
<p class="level0">Record changes in the source tree unpacked in <span Class="emphasis">directory</span>. This command can take supplementary parameters depending on the source format. It will error out for formats where this operation doesn't mean anything. 
<p class="level0">
<p class="level0"><span Class="manpage">-?</span>, <span Class="manpage">--help</span>Show the usage message and exit. 
<p class="level0"><span Class="manpage">--version</span>Show the version and exit. 
<p class="level0"><a name="OPTIONS"></a><h2 class="nroffsh">OPTIONS</h2>
<p class="level0"><a name="Generic"></a><h2 class="nroffsh">Generic build options</h2>
<p class="level0">
<p class="level0"><span Class="bold">-c control-file</span> Specifies the main source control file to read information from. The default is <span Class="manpage">debian/control .</span>If given with relative pathname this is interpreted starting at the source tree's top level directory. 
<p class="level0"><span Class="bold">-l changelog-file</span> Specifies the changelog file to read information from. The default is <span Class="manpage">debian/changelog .</span>If given with relative pathname this is interpreted starting at the source tree's top level directory. 
<p class="level0"><span Class="bold">-F changelog-format</span> Specifies the format of the changelog. See <span Class="bold">dpkg-parsechangelog</span>(1) for information about alternative formats. 
<p class="level0"><span Class="bold">--format= value</span> Use the given format for building the source package. It does override any format given in <a class="bold" href="#debiansourceformat">debian/source/format</a>. 
<p class="level0"><span Class="bold">-V name = value</span> Set an output substitution variable. See <span Class="bold">deb-substvars</span>(5) for a discussion of output substitution. 
<p class="level0"><span Class="bold">-T substvars-file</span> Read substitution variables in <span Class="emphasis">substvars-file ;</span> the default is to not read any file. This option can be used multiple times to read substitution variables from multiple files. 
<p class="level0"><span Class="bold">-D field = value</span> Override or add an output control file field. 
<p class="level0"><span Class="bold">-U field</span> Remove an output control file field. 
<p class="level0"><span Class="manpage">-Z \fIcompression\fP</span>, <span Class="manpage">--compression =\fIcompression\fP</span>Specify the compression to use for created files (tarballs and diffs). Note that this option will not cause existing tarballs to be recompressed, it only affects new files. Supported values are: <span Class="emphasis">gzip ,  bzip2 ,  lzma  and  xz .</span> The default is <span Class="emphasis">xz</span> for formats 2.0 and newer, and <span Class="emphasis">gzip</span> for format 1.0. <span Class="emphasis">xz</span> is only supported since dpkg 1.15.5. 
<p class="level0"><span Class="manpage">-z \fIlevel\fP</span>, <span Class="manpage">--compression-level =\fIlevel\fP</span>Compression level to use. As with <span Class="bold">-Z</span> it only affects newly created files. Supported values are: <span Class="emphasis">1  to  9 ,  best , and  fast .</span> The default is <span Class="emphasis">9</span> for gzip and bzip2, <span Class="emphasis">6</span> for xz and lzma. 
<p class="level0"><span Class="manpage">-i [\fIregex\fP]</span>, <span Class="manpage">--diff-ignore [=\fIregex\fP]</span>You may specify a perl regular expression to match files you want filtered out of the list of files for the diff. (This list is generated by a find command.) (If the source package is being built as a version 3 source package using a VCS, this can be used to ignore uncommited changes on specific files. Using -i.* will ignore all of them.) 
<p class="level0">The <span Class="bold">-i</span> option by itself enables this setting with a default regex (preserving any modification to the default regex done by a previous use of <span Class="bold">--extend-diff-ignore</span>) that will filter out control files and directories of the most common revision control systems, backup and swap files and Libtool build output directories. There can only be one active regex, of multiple <span Class="bold">-i</span> options only the last one will take effect. 
<p class="level0">This is very helpful in cutting out extraneous files that get included in the diff, e.g. if you maintain your source in a revision control system and want to use a checkout to build a source package without including the additional files and directories that it will usually contain (e.g. CVS/, .cvsignore, .svn/). The default regex is already very exhaustive, but if you need to replace it, please note that by default it can match any part of a path, so if you want to match the begin of a filename or only full filenames, you will need to provide the necessary anchors (e.g. '(^|/)', '($|/)') yourself. 
<p class="level0"><span Class="manpage">--extend-diff-ignore =\fIregex\fP</span>The perl regular expression specified will extend the default value used by <span Class="bold">--diff-ignore</span> and its current value (if set). It does this by concatenating "<span Class="bold">|</span><span Class="emphasis">regex</span>" to the existing value. This option is convenient to use in <a class="bold" href="#debiansourceoptions">debian/source/options</a> to exclude some auto-generated files from the automatic patch generation. 
<p class="level0"><span Class="manpage">-I [\fIfile-pattern\fP]</span>, <span Class="manpage">--tar-ignore [=\fIfile-pattern\fP]</span>If this option is specified, the pattern will be passed to <span Class="manpage">tar (1)'s</span><span Class="bold">--exclude</span> option when it is called to generate a .orig.tar or .tar file. For example, <span Class="bold">-I</span>CVS will make tar skip over CVS directories when generating a .tar.gz file. The option may be repeated multiple times to list multiple patterns to exclude. 
<p class="level0"><span Class="bold">-I</span> by itself adds default <span Class="bold">--exclude</span> options that will filter out control files and directories of the most common revision control systems, backup and swap files and Libtool build output directories. 
<p class="level0"><span Class="bold">Note:</span> While they have similar purposes, <span Class="bold">-i</span> and <span Class="bold">-I</span> have very different syntax and semantics. <span Class="bold">-i</span> can only be specified once and takes a perl compatible regular expression which is matched against the full relative path of each file. <span Class="bold">-I</span> can specified multiple times and takes a filename pattern with shell wildcards. The pattern is applied to the full relative path but also to each part of the path individually. The exact semantic of tar's <span Class="bold">--exclude</span> option is somewhat complicated, see <a href="https://www.gnu.org/software/tar/manual/tar.html&#35;wildcards">https://www.gnu.org/software/tar/manual/tar.html&#35;wildcards</a> for a full documentation. 
<p class="level0">The default regex and patterns for both options can be seen in the output of the <span Class="bold">--help</span> command. <a name="Generic"></a><h2 class="nroffsh">Generic extract options</h2>
<p class="level0">
<p class="level0"><span Class="bold">--no-copy</span> Do not copy original tarballs near the extracted source package. 
<p class="level0"><span Class="bold">--no-check</span> Do not check signatures and checksums before unpacking. 
<p class="level0"><span Class="bold">--require-valid-signature</span> Refuse to unpack the source package if it doesn't contain an OpenPGP signature that can be verified either with the user's <span Class="emphasis">trustedkeys.gpg</span> keyring, one of the vendor-specific keyrings, or one of the official Debian keyrings (<span Class="emphasis">/usr/share/keyrings/debian-keyring.gpg</span> and <span Class="emphasis">/usr/share/keyrings/debian-maintainers.gpg</span>). 
<p class="level0"><span Class="bold">--ignore-bad-version</span> Turns the bad source package version check into a non-fatal warning. This option should only be necessary when extracting ancient source packages with broken versions, just for backwards compatibility. 
<p class="level0"><a name="SOURCE"></a><h2 class="nroffsh">SOURCE PACKAGE FORMATS</h2>
<p class="level0">If you don't know what source format to use, you should probably pick either "3.0 (quilt)" or "3.0 (native)". See <a href="https://wiki.debian.org/Projects/DebSrc3.0">https://wiki.debian.org/Projects/DebSrc3.0</a> for information on the deployment of those formats within Debian. 
<p class="level0"><a name="Format"></a><h2 class="nroffsh">Format: 1.0</h2>
<p class="level0">A source package in this format consists either of a <span Class="bold">.orig.tar.gz</span> associated to a <span Class="bold">.diff.gz</span> or a single <span Class="bold">.tar.gz</span> (in that case the package is said to be <span Class="emphasis">native</span>). 
<p class="level0"><span Class="bold">Extracting</span> 
<p class="level0">Extracting a native package is a simple extraction of the single tarball in the target directory. Extracting a non-native package is done by first unpacking the <span Class="bold">.orig.tar.gz</span> and then applying the patch contained in the <span Class="bold">.diff.gz</span> file. The timestamp of all patched files is reset to the extraction time of the source package (this avoids timestamp skews leading to problems when autogenerated files are patched). The diff can create new files (the whole debian directory is created that way) but can't remove files (empty files will be left over). 
<p class="level0"><span Class="bold">Building</span> 
<p class="level0">Building a native package is just creating a single tarball with the source directory. Building a non-native package involves extracting the original tarball in a separate ".orig" directory and regenerating the <span Class="bold">.diff.gz</span> by comparing the source package <span Class="emphasis">directory</span> with the .orig directory. 
<p class="level0"><span Class="bold">Build options (with --build):</span> 
<p class="level0">If a second non-option argument is supplied it should be the name of the original source directory or tarfile or the empty string if the package is a Debian-specific one and so has no Debianisation diffs. If no second argument is supplied then <span Class="bold">dpkg-source</span> will look for the original source tarfile 
<p class="level0">or the original source directory 
<p class="level0">depending on the <span Class="bold">-sX</span> arguments. 
<p class="level0"><span Class="manpage">-sa</span>, <span Class="manpage">-sp</span>, <span Class="manpage">-sk</span>, <span Class="manpage">-su  and  -sr</span>will not overwrite existing tarfiles or directories. If this is desired then <span Class="manpage">-sA</span>, <span Class="manpage">-sP</span>, <span Class="manpage">-sK</span>, <span Class="manpage">-sU  and  -sR</span>should be used instead. 
<p class="level0">
<p class="level0"><span Class="manpage">-sk</span>Specifies to expect the original source as a tarfile, by default 
<p class="level0">It will leave this original source in place as a tarfile, or copy it to the current directory if it isn't already there. The tarball will be unpacked into 
<p class="level0">for the generation of the diff. 
<p class="level0"><span Class="bold">-sp</span> Like <span Class="bold">-sk</span> but will remove the directory again afterwards. 
<p class="level0"><span Class="bold">-su</span> Specifies that the original source is expected as a directory, by default 
<p class="level0">and <span Class="bold">dpkg-source</span> will create a new original source archive from it. 
<p class="level0"><span Class="bold">-sr</span> Like <span Class="bold">-su</span> but will remove that directory after it has been used. 
<p class="level0"><span Class="bold">-ss</span> Specifies that the original source is available both as a directory and as a tarfile. <span Class="bold">dpkg-source</span> will use the directory to create the diff, but the tarfile to create the <span Class="manpage">.dsc .</span>This option must be used with care - if the directory and tarfile do not match a bad source archive will be generated. 
<p class="level0"><span Class="bold">-sn</span> Specifies to not look for any original source, and to not generate a diff. The second argument, if supplied, must be the empty string. This is used for Debian-specific packages which do not have a separate upstream source and therefore have no debianisation diffs. 
<p class="level0"><span Class="manpage">-sa  or  -sA</span>Specifies to look for the original source archive as a tarfile or as a directory - the second argument, if any, may be either, or the empty string (this is equivalent to using <span Class="manpage">-sn ).</span>If a tarfile is found it will unpack it to create the diff and remove it afterwards (this is equivalent to <span Class="manpage">-sp );</span>if a directory is found it will pack it to create the original source and remove it afterwards (this is equivalent to <span Class="manpage">-sr );</span>if neither is found it will assume that the package has no debianisation diffs, only a straightforward source archive (this is equivalent to <span Class="manpage">-sn ).</span>If both are found then <span Class="bold">dpkg-source</span> will ignore the directory, overwriting it, if <span Class="bold">-sA</span> was specified (this is equivalent to <span Class="manpage">-sP )</span>or raise an error if <span Class="bold">-sa</span> was specified. <span Class="bold">-sA</span> is the default. 
<p class="level0"><span Class="bold">--abort-on-upstream-changes</span> The process fails if the generated diff contains changes to files outside of the debian sub-directory. This option is not allowed in <a class="bold" href="#debiansourceoptions">debian/source/options</a> but can be used in <a class="bold" href="#debiansourcelocal-options">debian/source/local-options</a>. 
<p class="level0">
<p class="level0"><span Class="bold">Extract options (with --extract):</span> 
<p class="level0">In all cases any existing original source tree will be removed. 
<p class="level0"><span Class="bold">-sp</span> Used when extracting then the original source (if any) will be left as a tarfile. If it is not already located in the current directory or if an existing but different file is there it will be copied there. (<span Class="bold">This is the default</span>). 
<p class="level0"><span Class="bold">-su</span> Unpacks the original source tree. 
<p class="level0"><span Class="bold">-sn</span> Ensures that the original source is neither copied to the current directory nor unpacked. Any original source tree that was in the current directory is still removed. 
<p class="level0">All the <span Class="bold">-s X</span> options are mutually exclusive. If you specify more than one only the last one will be used. 
<p class="level0"><span Class="bold">--skip-debianization</span> Skips application of the debian diff on top of the upstream sources. 
<p class="level0"><a name="Format"></a><h2 class="nroffsh">Format: 2.0</h2>
<p class="level0">Also known as wig&pen. This format is not recommended for wide-spread usage, the format "3.0 (quilt)" replaces it. Wig&pen was the first specification of a new-generation source package format. 
<p class="level0">The behaviour of this format is the same as the "3.0 (quilt)" format except that it doesn't use an explicit list of patches. All files in <span Class="bold">debian/patches/</span> matching the perl regular expression <span Class="bold">[\w-]+</span> must be valid patches: they are applied at extraction time. 
<p class="level0">When building a new source package, any change to the upstream source is stored in a patch named <span Class="bold">zz_debian-diff-auto</span>. 
<p class="level0"><a name="Format"></a><h2 class="nroffsh">Format: 3.0 (native)</h2>
<p class="level0">This format is an extension of the native package format as defined in the 1.0 format. It supports all compression methods and will ignore by default any VCS specific files and directories as well as many temporary files (see default value associated to <span Class="bold">-I</span> option in the <span Class="bold">--help</span> output). 
<p class="level0"><a name="Format"></a><h2 class="nroffsh">Format: 3.0 (quilt)</h2>
<p class="level0">A source package in this format contains at least an original tarball (<span Class="bold">.orig.tar.</span><span Class="emphasis">ext</span> where <span Class="emphasis">ext</span> can be <span Class="bold">gz</span>, <span Class="bold">bz2</span>, <span Class="bold">lzma</span> and <span Class="bold">xz</span>) and a debian tarball (<span Class="bold">.debian.tar.</span><span Class="emphasis">ext</span>). It can also contain additional original tarballs (<span Class="bold">.orig-</span><span Class="emphasis">component</span><span Class="bold">.tar.</span><span Class="emphasis">ext</span>). <span Class="emphasis">component</span> can only contain alphanumeric characters and hyphens ("-"). 
<p class="level0"><span Class="bold">Extracting</span> 
<p class="level0">The main original tarball is extracted first, then all additional original tarballs are extracted in subdirectories named after the <span Class="emphasis">component</span> part of their filename (any pre-existing directory is replaced). The debian tarball is extracted on top of the source directory after prior removal of any pre-existing <span Class="bold">debian</span> directory. Note that the debian tarball must contain a <span Class="bold">debian</span> sub-directory but it can also contain binary files outside of that directory (see <span Class="bold">--include-binaries</span> option). 
<p class="level0">All patches listed in <span Class="bold">debian/patches/debian.series</span> or <a class="bold" href="#debianpatchesseries">debian/patches/series</a> are then applied. If the former file is used and the latter one doesn't exist (or is a symlink), then the latter is replaced with a symlink to the former. This is meant to simplify usage of <span Class="bold">quilt</span> to manage the set of patches. Note however that while <span Class="bold">dpkg-source</span> parses correctly series files with explicit options used for patch application (stored on each line after the patch filename and one or more spaces), it does ignore those options and always expect patches that can be applied with the <span Class="bold">-p1</span> option of <span Class="bold">patch</span>. It will thus emit a warning when it encounters such options, and the build is likely to fail. 
<p class="level0">Contrary to <span Class="bold">quilt</span>'s default behaviour, patches are expected to apply without any fuzz. When that is not the case, you should refresh such patches with <span Class="bold">quilt</span>, or <span Class="bold">dpkg-source</span> will error out while trying to apply them. 
<p class="level0">Similarly to <span Class="bold">quilt</span>'s default behaviour, the patches can remove files too. 
<p class="level0">The file <span Class="bold">.pc/applied-patches</span> is created if some patches have been applied during the extraction. 
<p class="level0"><span Class="bold">Building</span> 
<p class="level0">All original tarballs found in the current directory are extracted in a temporary directory by following the same logic as for the unpack, the debian directory is copied over in the temporary directory, and all patches except the automatic patch (<span Class="bold">debian-changes-</span><span Class="emphasis">version</span> or <span Class="bold">debian-changes</span>, depending on <span Class="bold">--single-debian-patch</span>) are applied. The temporary directory is compared to the source package directory. When the diff is non-empty, the build fails unless <span Class="bold">--single-debian-patch</span> or <span Class="bold">--auto-commit</span> has been used, in which case the diff is stored in the automatic patch. If the automatic patch is created/deleted, it's added/removed from the series file and from the <span Class="bold">quilt</span> metadata. 
<p class="level0">Any change on a binary file is not representable in a diff and will thus lead to a failure unless the maintainer deliberately decided to include that modified binary file in the debian tarball (by listing it in <a class="bold" href="#debiansourceinclude-binaries">debian/source/include-binaries</a>). The build will also fail if it finds binary files in the debian sub-directory unless they have been whitelisted through <a class="bold" href="#debiansourceinclude-binaries">debian/source/include-binaries</a>. 
<p class="level0">The updated debian directory and the list of modified binaries is then used to generate the debian tarball. 
<p class="level0">The automatically generated diff doesn't include changes on VCS specific files as well as many temporary files (see default value associated to <span Class="bold">-i</span> option in the <span Class="bold">--help</span> output). In particular, the <span Class="bold">.pc</span> directory used by <span Class="bold">quilt</span> is ignored during generation of the automatic patch. 
<p class="level0">Note: <span Class="bold">dpkg-source</span> <span Class="bold">--before-build</span> (and <span Class="bold">--build</span>) will ensure that all patches listed in the series file are applied so that a package build always has all patches applied. It does this by finding unapplied patches (they are listed in the <span Class="bold">series</span> file but not in <span Class="bold">.pc/applied-patches</span>), and if the first patch in that set can be applied without errors, it will apply them all. The option <span Class="bold">--no-preparation</span> can be used to disable this behavior. 
<p class="level0">
<p class="level0"><span Class="bold">Recording changes</span> 
<p class="level0">
<p class="level0">Generates a patch corresponding to the local changes that are not managed by the <span Class="bold">quilt</span> patch system and integrates it in the patch system under the name <span Class="emphasis">patch-name</span>. If the name is missing, it will be asked interactively. If <span Class="emphasis">patch-file</span> is given, it is used as the patch corresponding to the local changes to integrate. Once integrated, an editor is launched so that you can edit the meta-information in the patch header. 
<p class="level0">Passing <span Class="emphasis">patch-file</span> is mainly useful after a build failure that pre-generated this file, and on this ground the given file is removed after integration. Note also that the changes contained in the patch file must already be applied on the tree and that the files modified by the patch must not have supplementary unrecorded changes. 
<p class="level0">If the patch generation detects modified binary files, they will be automatically added to <a class="bold" href="#debiansourceinclude-binaries">debian/source/include-binaries</a> so that they end up in the debian tarball (exactly like <span class="bold">dpkg-source --include-binaries --build</span> would do). 
<p class="level0"><span Class="bold">Build options</span> 
<p class="level0"><span Class="bold">--allow-version-of-quilt-db= version</span> Allow <span Class="bold">dpkg-source</span> to build the source package if the version of the <span Class="bold">quilt</span> metadata is the one specified, even if <span Class="bold">dpkg-source</span> doesn't know about it. Effectively this says that the given version of the <span Class="bold">quilt</span> metadata is compatible with the version 2 that <span Class="bold">dpkg-source</span> currently supports. The version of the <span Class="bold">quilt</span> metadata is stored in <span Class="bold">.pc/.version</span>. 
<p class="level0"><span Class="bold">--include-removal</span> Do not ignore removed files and include them in the automatically generated patch. 
<p class="level0"><span Class="bold">--include-timestamp</span> Include timestamp in the automatically generated patch. 
<p class="level0"><span Class="bold">--include-binaries</span> Add all modified binaries in the debian tarball. Also add them to <a class="bold" href="#debiansourceinclude-binaries">debian/source/include-binaries</a>: they will be added by default in subsequent builds and this option is thus no more needed. 
<p class="level0"><span Class="bold">--no-preparation</span> Do not try to prepare the build tree by applying patches which are apparently unapplied. 
<p class="level0"><span Class="bold">--single-debian-patch</span> Use <span Class="bold">debian/patches/debian-changes</span> instead of <span Class="bold">debian/patches/debian-changes-</span><span Class="emphasis">version</span> for the name of the automatic patch generated during build. This option is particularly useful when the package is maintained in a VCS and a patch set can't reliably be generated. Instead the current diff with upstream should be stored in a single patch. The option would be put in <a class="bold" href="#debiansourcelocal-options">debian/source/local-options</a> and would be accompanied by a <a class="bold" href="#debiansourcelocal-patch-header">debian/source/local-patch-header</a> file explaining how the Debian changes can be best reviewed, for example in the VCS that is used. 
<p class="level0"><span Class="bold">--create-empty-orig</span> Automatically create the main original tarball as empty if it's missing and if there are supplementary original tarballs. This option is meant to be used when the source package is just a bundle of multiple upstream software and where there's no "main" software. 
<p class="level0"><span Class="bold">--no-unapply-patches, --unapply-patches</span> By default, <span Class="bold">dpkg-source</span> will automatically unapply the patches in the <span Class="bold">--after-build</span> hook if it did apply them during <span Class="bold">--before-build</span>. Those options allow you to forcefully disable or enable the patch unapplication process. Those options are only allowed in <a class="bold" href="#debiansourcelocal-options">debian/source/local-options</a> so that all generated source packages have the same behavior by default. 
<p class="level0"><span Class="bold">--abort-on-upstream-changes</span> The process fails if an automatic patch has been generated. This option can be used to ensure that all changes were properly recorded in separate <span Class="bold">quilt</span> patches prior to the source package build. This option is not allowed in <a class="bold" href="#debiansourceoptions">debian/source/options</a> but can be used in <a class="bold" href="#debiansourcelocal-options">debian/source/local-options</a>. 
<p class="level0"><span Class="bold">--auto-commit</span> The process doesn't fail if an automatic patch has been generated, instead it's immediately recorded in the <span Class="bold">quilt</span> series. 
<p class="level0">
<p class="level0"><span Class="bold">Extract options</span> 
<p class="level0"><span Class="bold">--skip-debianization</span> Skips extraction of the debian tarball on top of the upstream sources. 
<p class="level0"><span Class="bold">--skip-patches</span> Do not apply patches at the end of the extraction. 
<p class="level0"><a name="Format"></a><h2 class="nroffsh">Format: 3.0 (custom)</h2>
<p class="level0">This format is special. It doesn't represent a real source package format but can be used to create source packages with arbitrary files. 
<p class="level0"><span Class="bold">Build options</span> 
<p class="level0">All non-option arguments are taken as files to integrate in the generated source package. They must exist and are preferably in the current directory. At least one file must be given. 
<p class="level0"><span Class="bold">--target-format= value</span> <span Class="bold">Required</span>. Defines the real format of the generated source package. The generated .dsc file will contain this value in its <a class="bold" href="#Format">Format</a> field and not "3.0 (custom)". 
<p class="level0"><a name="Format"></a><h2 class="nroffsh">Format: 3.0 (git)</h2>
<p class="level0">This format is experimental. 
<p class="level0">A source package in this format consists of a single bundle of a git repository <span Class="bold">.git</span> to hold the source of a package. There may also be a <span Class="bold">.gitshallow</span> file listing revisions for a shallow git clone. 
<p class="level0"><span Class="bold">Extracting</span> 
<p class="level0">The bundle is cloned as a git repository to the target directory. If there is a gitshallow file, it is installed as `.git/shallow` inside the cloned git repository. 
<p class="level0">Note that by default the new repository will have the same branch checked out that was checked out in the original source. (Typically "master", but it could be anything.) Any other branches will be available under `remotes/origin/`. 
<p class="level0"><span Class="bold">Building</span> 
<p class="level0">Before going any further, some checks are done to ensure that we don't have any non-ignored uncommitted changes. 
<p class="level0"><span Class="bold">git-bundle</span>(1) is used to generate a bundle of the git repository. By default, all branches and tags in the repository are included in the bundle. 
<p class="level0"><span Class="bold">Build options</span> 
<p class="level0"><span Class="bold">--git-ref= ref</span> Allows specifying a git ref to include in the git bundle. Use disables the default behavior of including all branches and tags. May be specified multiple times. The <span Class="emphasis">ref</span> can be the name of a branch or tag to include. It may also be any parameter that can be passed to <span Class="bold">git-rev-list</span>(1). For example, to include only the master branch, use <span Class="bold">--git-ref=</span>master. To include all tags and branches, except for the private branch, use <span Class="bold">--git-ref=</span>--all <span Class="bold">--git-ref=</span>^private 
<p class="level0"><span Class="bold">--git-depth= number</span> Creates a shallow clone with a history truncated to the specified number of revisions. <a name="Format"></a><h2 class="nroffsh">Format: 3.0 (bzr)</h2>
<p class="level0">This format is experimental. It generates a single tarball containing the bzr repository. 
<p class="level0"><span Class="bold">Extracting</span> 
<p class="level0">The tarball is unpacked and then bzr is used to checkout the current branch. 
<p class="level0"><span Class="bold">Building</span> 
<p class="level0">Before going any further, some checks are done to ensure that we don't have any non-ignored uncommitted changes. 
<p class="level0">Then the VCS specific part of the source directory is copied over to a temporary directory. Before this temporary directory is packed in a tarball, various cleanup are done to save space. <a name="DIAGNOSTICS"></a><h2 class="nroffsh">DIAGNOSTICS</h2>
<p class="level0"><a name="no"></a><h2 class="nroffsh">no source format specified in debian/source/format</h2>
<p class="level0">The file <a class="bold" href="#debiansourceformat">debian/source/format</a> should always exist and indicate the desired source format. For backwards compatibility, format "1.0" is assumed when the file doesn't exist but you should not rely on this: at some point in the future <span Class="bold">dpkg-source</span> will be modified to fail when that file doesn't exist. 
<p class="level0">The rationale is that format "1.0" is no longer the recommended format, you should usually pick one of the newer formats ("3.0 (quilt)", "3.0 (native)") but <span Class="bold">dpkg-source</span> will not do this automatically for you. If you want to continue using the old format, you should be explicit about it and put "1.0" in <a class="bold" href="#debiansourceformat">debian/source/format</a>. <a name="the"></a><h2 class="nroffsh">the diff modifies the following upstream files</h2>
<p class="level0">When using source format "1.0" it is usually a bad idea to modify upstream files directly as the changes end up hidden and mostly undocumented in the .diff.gz file. Instead you should store your changes as patches in the debian directory and apply them at build-time. To avoid this complexity you can also use the format "3.0 (quilt)" that offers this natively. <a name="cannot"></a><h2 class="nroffsh">cannot represent change to \fIfile\fP</h2>
<p class="level0">Changes to upstream sources are usually stored with patch files, but not all changes can be represented with patches: they can only alter the content of plain text files. If you try replacing a file with something of a different type (for example replacing a plain file with a symlink or a directory), you will get this error message. <a name="newly"></a><h2 class="nroffsh">newly created empty file \fIfile\fB will not be represented in diff</h2>
<p class="level0">Empty files can't be created with patch files. Thus this change is not recorded in the source package and you are warned about it. <a name="executable"></a><h2 class="nroffsh">executable mode \fIperms\fB of \fIfile\fB will not be represented in diff</h2>
<p class="level0">Patch files do not record permissions of files and thus executable permissions are not stored in the source package. This warning reminds you of that fact. <a name="special"></a><h2 class="nroffsh">special mode \fIperms\fB of \fIfile\fB will not be represented in diff</h2>
<p class="level0">Patch files do not record permissions of files and thus modified permissions are not stored in the source package. This warning reminds you of that fact. <a name="FILE"></a><h2 class="nroffsh">FILE FORMATS</h2>
<p class="level0"><a name="debiansourceformat"></a><h2 class="nroffsh">debian/source/format</h2>
<p class="level0">This file contains on a single line the format that should be used to build the source package (possible formats are described above). No leading or trailing spaces are allowed. <a name="debiansourceinclude-binaries"></a><h2 class="nroffsh">debian/source/include-binaries</h2>
<p class="level0">This file contains a list of binary files (one per line) that should be included in the debian tarball. Leading and trailing spaces are stripped. Lines starting with "&#35;" are comments and are skipped. Empty lines are ignored. <a name="debiansourceoptions"></a><h2 class="nroffsh">debian/source/options</h2>
<p class="level0">This file contains a list of long options that should be automatically prepended to the set of command line options of a <span Class="bold">dpkg-source --build</span> or <span Class="bold">dpkg-source --print-format</span> call. Options like <span Class="bold">--compression</span> and <span Class="bold">--compression-level</span> are well suited for this file. 
<p class="level0">Each option should be put on a separate line. Empty lines and lines starting with "&#35;" are ignored. The leading "--" should be stripped and short options are not allowed. Optional spaces are allowed around the "=" symbol and optional quotes are allowed around the value. Here's an example of such a file: 
<p class="level0">&nbsp; &#35; let dpkg-source create a debian.tar.bz2 with maximal compression &nbsp; compression = "bzip2" &nbsp; compression-level = 9 &nbsp; &#35; use debian/patches/debian-changes as automatic patch &nbsp; single-debian-patch &nbsp; &#35; ignore changes on config.{sub,guess} &nbsp; extend-diff-ignore = "(^|/)(config.sub|config.guess)$" 
<p class="level0">Note: <span Class="bold">format</span> options are not accepted in this file, you should use <a class="bold" href="#debiansourceformat">debian/source/format</a> instead. <a name="debiansourcelocal-options"></a><h2 class="nroffsh">debian/source/local-options</h2>
<p class="level0">Exactly like <a class="bold" href="#debiansourceoptions">debian/source/options</a> except that the file is not included in the generated source package. It can be useful to store a preference tied to the maintainer or to the VCS repository where the source package is maintained. <a name="debiansourcelocal-patch-header"></a><h2 class="nroffsh">debian/source/local-patch-header \fRand\fP debian/source/patch-header</h2>
<p class="level0">Free form text that is put on top of the automatic patch generated in formats "2.0" or "3.0 (quilt)". <span Class="bold">local-patch-header</span> is not included in the generated source package while <span Class="bold">patch-header</span> is. <a name="debianpatchesseries"></a><h2 class="nroffsh">debian/patches/series</h2>
<p class="level0">This file lists all patches that have to be applied (in the given order) on top of the upstream source package. Leading and trailing spaces are stripped. Lines starting with "&#35;" are comments and are skipped. Empty lines are ignored. Remaining lines start with a patch filename (relative to the <span Class="bold">debian/patches/</span> directory) up to the first space character or the end of line. Optional <span Class="bold">quilt</span> options can follow up to the end of line or the first "&#35;" preceded by one or more spaces (which marks the start of a comment up to the end of line). <a name="BUGS"></a><h2 class="nroffsh">BUGS</h2>
<p class="level0">The point at which field overriding occurs compared to certain standard output field settings is rather confused. <a name="SEE"></a><h2 class="nroffsh">SEE ALSO</h2>
<p class="level0"><span Class="manpage">dpkg-deb (1)</span>, <span Class="manpage">dpkg (1)</span>, <span Class="manpage">dselect (1).</span>