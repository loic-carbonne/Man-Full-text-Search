
<p class="level0"><a name="NAME"></a><h2 class="nroffsh">NAME</h2>
<p class="level0">xsm - X Session Manager <a name="SYNOPSIS"></a><h2 class="nroffsh">SYNOPSIS</h2>
<p class="level0"><span Class="bold">xsm</span> [-display display] [-session sessionName] [-verbose] <a name="DESCRIPTION"></a><h2 class="nroffsh">DESCRIPTION</h2>
<p class="level0">
<p class="level0"><span Class="emphasis">xsm</span> is a session manager.  A session is a group of applications, each of which has a particular state.  <span Class="emphasis">xsm</span> allows you to create arbitrary sessions - for example, you might have a "light" session, a "development" session, or an "xterminal" session.  Each session can have its own set of applications.  Within a session, you can perform a "checkpoint" to save application state, or a "shutdown" to save state and exit the session.  When you log back in to the system, you can load a specific session, and you can delete sessions you no longer want to keep. <br>
<p class="level0">Some session managers simply allow you to manually specify a list of applications to be started in a session.  <span Class="emphasis">xsm</span> is more powerful because it lets you run applications and have them automatically become part of the session.  On a simple level, <span Class="emphasis">xsm</span> is useful because it gives you this ability to easily define which applications are in a session. The true power of <span Class="emphasis">xsm</span>, however, can be taken advantage of when more and more applications learn to save and restore their state. <a name="OPTIONS"></a><h2 class="nroffsh">OPTIONS</h2>
<p class="level0">
<p class="level0"><span Class="bold">-display display</span> Causes <span Class="emphasis">xsm</span> to connect to the specified X display. 
<p class="level0"><span Class="bold">-session sessionName</span> Causes <span Class="emphasis">xsm</span> to load the specified session, bypassing the session menu. 
<p class="level0"><span Class="bold">-verbose</span> Turns on debugging information. <a name="SETUP"></a><h2 class="nroffsh">SETUP</h2>
<p class="level0"><a name="xsession"></a><h2 class="nroffsh">.xsession file</h2>
<p class="level0">Using <span Class="emphasis">xsm</span> requires a change to your <a class="emphasis" href="#xsession">.xsession</a> file: 
<p class="level0">The last program executed by your <a class="emphasis" href="#xsession">.xsession</a> file should be <span Class="emphasis">xsm</span>.  With this configuration, when the user chooses to shut down the session using <span Class="emphasis">xsm</span>, the session will truly be over. 
<p class="level0">Since the goal of the session manager is to restart clients when logging into a session, your .xsession file, in general, should not directly start up applications.  Rather, the applications should be started within a session.  When <span Class="emphasis">xsm</span> shuts down the session, <span Class="emphasis">xsm</span> will know to restart these applications.  Note however that there are some types of applications that are not "session aware".  <span Class="emphasis">xsm</span> allows you to manually add these applications to your session (see the section titled <span Class="emphasis">Client List</span>). 
<p class="level0"><a name="SMSAVEDIR"></a><h2 class="nroffsh">SM_SAVE_DIR environment variable</h2>
<p class="level0">If the <a class="emphasis" href="#SMSAVEDIR">SM_SAVE_DIR</a> environment variable is defined, <span Class="emphasis">xsm</span> will save all configuration files in this directory.  Otherwise, they will be stored in the user's home directory.  Session aware applications are also encouraged to save their checkpoint files in the <a class="emphasis" href="#SMSAVEDIR">SM_SAVE_DIR</a> directory, although the user should not depend on this convention. 
<p class="level0"><a name="Default"></a><h2 class="nroffsh">Default Startup Applications</h2>
<p class="level0">The first time <span Class="emphasis">xsm</span> is started, it will need to locate a list of applications to start up.  For example, this list might include a window manager, a session management proxy, and an xterm.  <span Class="emphasis">xsm</span> will first look for the file <span Class="emphasis">.xsmstartup</span> in the user's home directory.  If that file does not exist, it will look for the <span Class="emphasis">system.xsm</span> file that was set up at installation time.  Note that <span Class="emphasis">xsm</span> provides a "fail safe" option when the user chooses a session to start up.  The fail safe option simply loads the default applications described above. 
<p class="level0">Each line in the startup file should contain a command to start an application. A sample startup file might look this: 
<p class="level0">&lt;start of file&gt; <br>twm <br>smproxy <br>xterm <br>&lt;end of file&gt; 
<p class="level0"><a name="STARTING"></a><h2 class="nroffsh">STARTING A SESSION</h2>
<p class="level0">When <span Class="emphasis">xsm</span> starts up, it first checks to see if the user previously saved any sessions.  If no saved sessions exist, <span Class="emphasis">xsm</span> starts up a set of default applications (as described above in the section titled <a class="emphasis" href="#Default">Default Startup Applications</a>).  If at least one session exists, a session menu is presented.  The <span Class="bold">[-session sessionName]</span> option forces the specified session to be loaded, bypassing the session menu. <a name="The"></a><h2 class="nroffsh">The session menu</h2>
<p class="level0">The session menu presents the user with a list of sessions to choose from. The user can change the currently selected session with the mouse, or by using the up and down arrows on the keyboard.  Note that sessions which are locked (i.e. running on a different display) can not be loaded or deleted. 
<p class="level0">The following operations can be performed from the session menu: 
<p class="level0">
<p class="level0"><span Class="bold">Load Session</span> Pressing this button will load the currently selected session.  Alternatively, hitting the Return key will also load the currently selected session, or the user can double click a session from the list. 
<p class="level0"><span Class="bold">Delete Session</span> This operation will delete the currently selected session, along with all of the application checkpoint files associated with the session.  After pressing this button, the user will be asked to press the button a second time in order to confirm the operation. 
<p class="level0"><span Class="bold">Default/Fail Safe</span> <span Class="emphasis">xsm</span> will start up a set of default applications (as described above in the section titled <a class="emphasis" href="#Default">Default Startup Applications</a>).  This is useful when the user wants to start a fresh session, or if the session configuration files were corrupted and the user wants a "fail safe" session. 
<p class="level0"><span Class="bold">Cancel</span> Pressing this button will cause <span Class="emphasis">xsm</span> to exit.  It can also be used to cancel a "Delete Session" operation. 
<p class="level0"><a name="CONTROLLING"></a><h2 class="nroffsh">CONTROLLING A SESSION</h2>
<p class="level0">After <span Class="emphasis">xsm</span> determines which session to load, it brings up its main window, then starts up all applications that are part of the session.  The title bar for the session manager's main window will contain the name of the session that was loaded. 
<p class="level0">The following options are available from <span Class="emphasis">xsm</span>'s main window: 
<p class="level0"><span Class="bold">Client List</span> Pressing this button brings up a window containing a list of all clients that are in the current session.  For each client, the host machine that the client is running on is presented.  As clients are added and removed from the session, this list is updated to reflect the changes.  The user is able to control how these clients are restarted (see below). <br>
<p class="level0">By pressing the <span Class="bold">View Properties</span> button, the user can view the session management properties associated with the currently selected client. <br>
<p class="level0">By pressing the <span Class="bold">Clone</span> button, the user can start a copy of the selected application. <br>
<p class="level0">By pressing the <span Class="bold">Kill Client</span> button, the user can remove a client from the session. <br>
<p class="level0">By selecting a restart hint from the <span Class="bold">Restart Hint</span> menu, the user can control the restarting of a client.  The following hints are available: <br>
<p class="level0"><span Class="bold">-</span> The <span Class="bold">Restart If Running</span> hint indicates that the client should be restarted in the next session if it is connected to the session manager at the end of the current session. <br>
<p class="level0"><span Class="bold">-</span> The <span Class="bold">Restart Anyway</span> hint indicates that the client should be restarted in the next session even if it exits before the current session is terminated. <br>
<p class="level0"><span Class="bold">-</span> The <span Class="bold">Restart Immediately</span> hint is similar to the <span Class="bold">Restart Anyway</span> hint, but in addition, the client is meant to run continuously.  If the client exits, the session manager will try to restart it in the current session. <br>
<p class="level0"><span Class="bold">-</span> The <span Class="bold">Restart Never</span> hint indicates that the client should not be restarted in the next session. <br>
<p class="level0">Note that all X applications may not be "session aware".  Applications that are not session aware are ones that do not support the X Session Management Protocol or they can not be detected by the Session Management Proxy (see the section titled <a class="emphasis" href="#THE">THE PROXY</a>).  <span Class="emphasis">xsm</span> allows the user to manually add such applications to the session.  The bottom of the <span Class="emphasis">Client List</span> window contains a text entry field in which application commands can be typed in. Each command should go on its own line.  This information will be saved with the session at checkpoint or shutdown time.  When the session is restarted, <span Class="emphasis">xsm</span> will restart these applications in addition to the regular "session aware" applications. <br>
<p class="level0">Pressing the <span Class="bold">Done</span> button removes the <span Class="bold">Client List</span> window. 
<p class="level0"><span Class="bold">Session Log...</span> The Session Log window presents useful information about the session.  For example, when a session is restarted, all of the restart commands will be displayed in the log window. 
<p class="level0"><span Class="bold">Checkpoint</span> By performing a checkpoint, all applications that are in the session are asked to save their state.  Not every application will save its complete state, but at a minimum, the session manager is guaranteed that it will receive the command required to restart the application (along with all command line options).  A window manager participating in the session should guarantee that the applications will come back up with the same window configurations. <br>
<p class="level0">If the session being checkpointed was never assigned a name, the user will be required to specify a session name.  Otherwise, the user can perform the checkpoint using the current session name, or a new session name can be specified.  If the session name specified already exists, the user will be given the opportunity to specify a different name or to overwrite the already existing session.  Note that a session which is locked can not be overwritten. <br>
<p class="level0">When performing a checkpoint, the user must specify a <span Class="bold">Save Type</span> which informs the applications in the session how much state they should save. <br>
<p class="level0">The <span Class="bold">Local</span> type indicates that the application should save enough information to restore the state as seen by the user.  It should not affect the state as seen by other users.  For example, an editor would create a temporary file containing the contents of its editing buffer, the location of the cursor, etc... <br>
<p class="level0">The <span Class="bold">Global</span> type indicates that the application should commit all of its data to permanent, globally accessible storage.  For example, the editor would simply save the edited file. <br>
<p class="level0">The <span Class="bold">Both</span> type indicates that the application should do both of these.  For example, the editor would save the edited file, then create a temporary file with information such as the location of the cursor, etc... <br>
<p class="level0">In addition to the <span Class="bold">Save Type</span>, the user must specify an <span Class="bold">Interact Style</span>. <br>
<p class="level0">The <span Class="bold">None</span> type indicates that the application should not interact with the user while saving state. <br>
<p class="level0">The <span Class="bold">Errors</span> type indicates that the application may interact with the user only if an error condition arises. <br>
<p class="level0">The <span Class="bold">Any</span> type indicates that the application may interact with the user for any purpose.  Note that <span Class="emphasis">xsm</span> will only allow one application to interact with the user at a time. <br>
<p class="level0">
<p class="level0">After the checkpoint is completed, <span Class="emphasis">xsm</span> will, if necessary, display a window containing the list of applications which did not report a successful save of state. 
<p class="level0"><span Class="bold">Shutdown</span> A shutdown provides all of the options found in a checkpoint, but in addition, can cause the session to exit.  Note that if the interaction style is <span Class="bold">Errors</span> or <span Class="bold">Any</span>, the user may cancel the shutdown.  The user may also cancel the shutdown if any of the applications report an unsuccessful save of state. <br>
<p class="level0">The user may choose to shutdown the session with our without performing a checkpoint. 
<p class="level0"><a name="HOW"></a><h2 class="nroffsh">HOW \fIXSM\fP RESPONDS TO SIGNALS</h2>
<p class="level0"><span Class="emphasis">xsm</span> will respond to a SIGTERM signal by performing a shutdown with the following options: fast, no interaction, save type local.  This allows the user's session to be saved when the system is being shutdown.  It can also be used to perform a remote shutdown of a session. <br>
<p class="level0"><span Class="emphasis">xsm</span> will respond to a SIGUSR1 signal by performing a checkpoint with the following options: no interaction, save type local.  This signal can be used to perform a remote checkpoint of a session. 
<p class="level0"><a name="THE"></a><h2 class="nroffsh">THE PROXY</h2>
<p class="level0">Since not all applications have been ported to support the X Session Management Protocol, a proxy service exists to allow "old" clients to work with the session manager.  In order for the proxy to detect an application joining a session, one of the following must be true: <br>
<p class="level0">- The application maps a top level window containing the <span Class="bold">WM_CLIENT_LEADER</span> property.  This property provides a pointer to the client leader window which contains the <span Class="bold">WM_CLASS</span>, <span Class="bold">WM_NAME</span>, <span Class="bold">WM_COMMAND</span>, and <span Class="bold">WM_CLIENT_MACHINE</span> properties. <br>
<p class="level0">or ... <br>
<p class="level0">- The application maps a top level window which does not contain the <span Class="bold">WM_CLIENT_LEADER</span> property.  However, this top level window contains the <span Class="bold">WM_CLASS</span>, <span Class="bold">WM_NAME</span>, <span Class="bold">WM_COMMAND</span>, and <span Class="bold">WM_CLIENT_MACHINE</span> properties. 
<p class="level0">An application that support the <span Class="bold">WM_SAVE_YOURSELF</span> protocol will receive a <span Class="bold">WM_SAVE_YOURSELF</span> client message each time the session manager issues a checkpoint or shutdown.  This allows the application to save state.  If an application does not support the <span Class="bold">WM_SAVE_YOURSELF</span> protocol, then the proxy will provide enough information to the session manager to restart the application (using <span Class="bold">WM_COMMAND</span>), but no state will be restored. 
<p class="level0"><a name="REMOTE"></a><h2 class="nroffsh">REMOTE APPLICATIONS</h2>
<p class="level0"><span Class="emphasis">xsm</span> requires a remote execution protocol in order to restart applications on remote machines.  Currently, <span Class="emphasis">xsm</span> supports the <span Class="emphasis">rstart</span> protocol.  In order to restart an application on remote machine <span Class="bold">X</span>, machine <span Class="bold">X</span> must have <span Class="emphasis">rstart</span> installed.  In the future, additional remote execution protocols may be supported. <a name="SEE"></a><h2 class="nroffsh">SEE ALSO</h2>
<p class="level0">smproxy(1), rstart(1) <a name="AUTHORS"></a><h2 class="nroffsh">AUTHORS</h2>
<p class="level0">Ralph Mor, X Consortium <br>Jordan Brown, Quarterdeck Office Systems 