
<p class="level0">
<p class="level0">
<p class="level0"><a name="NAME"></a><h2 class="nroffsh">NAME</h2>
<p class="level0">smtp-source - multi-threaded SMTP/LMTP test generator <a name="SYNOPSIS"></a><h2 class="nroffsh">SYNOPSIS</h2>
<p class="level0">
<p class="level0"><pre class="level0">
</pre>

<p class="level0"><span Class="bold">smtp-source</span> [<span Class="emphasis">options</span>] [<span Class="bold">inet:</span>]<span Class="emphasis">host</span>[:<span Class="emphasis">port</span>] 
<p class="level0"><span Class="bold">smtp-source</span> [<span Class="emphasis">options</span>] <span class="bold">unix:<span Class="emphasis">pathname</span> <a name="DESCRIPTION"></a><h2 class="nroffsh">DESCRIPTION</h2>
<p class="level0">
<p class="level0">
<p class="level0"><span Class="bold">smtp-source</span> connects to the named <span Class="emphasis">host</span> and TCP <span Class="emphasis">port</span> (default: port 25) and sends one or more messages to it, either sequentially or in parallel. The program speaks either SMTP (default) or LMTP. Connections can be made to UNIX-domain and IPv4 or IPv6 servers. IPv4 and IPv6 are the default. 
<p class="level0">Note: this is an unsupported test program. No attempt is made to maintain compatibility between successive versions. 
<p class="level0">Arguments: 
<p class="level0"><a name="fB-4fR"></a><span class="nroffip">\fB-4\fR</span> 
<p class="level1">Connect to the server with IPv4. This option has no effect when Postfix is built without IPv6 support. 
<p class="level0"><a name="fB-6fR"></a><span class="nroffip">\fB-6\fR</span> 
<p class="level1">Connect to the server with IPv6. This option is not available when Postfix is built without IPv6 support. 
<p class="level0"><a name="fB-AfR"></a><span class="nroffip">\fB-A\fR</span> 
<p class="level1">Don't abort when the server sends something other than the expected positive reply code. 
<p class="level0"><a name="fB-cfR"></a><span class="nroffip">\fB-c\fR</span> 
<p class="level1">Display a running counter that is incremented each time an SMTP DATA command completes. 
<p class="level0"><a name="fB-C"></a><span class="nroffip">\fB-C \fIcount\fR</span> 
<p class="level1">When a host sends RESET instead of SYN|ACK, try <span Class="emphasis">count</span> times before giving up. The default count is 1. Specify a larger count in order to work around a problem with TCP/IP stacks that send RESET when the listen queue is full. 
<p class="level0"><a name="fB-dfR"></a><span class="nroffip">\fB-d\fR</span> 
<p class="level1">Don't disconnect after sending a message; send the next message over the same connection. 
<p class="level0"><a name="fB-f"></a><span class="nroffip">\fB-f \fIfrom\fR</span> 
<p class="level1">Use the specified sender address (default: &lt;foo@myhostname&gt;). 
<p class="level0"><a name="fB-F"></a><span class="nroffip">\fB-F \fIfile\fR</span> 
<p class="level1">Send the pre-formatted message header and body in the specified <span Class="emphasis">file</span>, while prepending '.' before lines that begin with '.', and while appending CRLF after each line. 
<p class="level0"><a name="fB-l"></a><span class="nroffip">\fB-l \fIlength\fR</span> 
<p class="level1">Send <span Class="emphasis">length</span> bytes as message payload. The length does not include message headers. 
<p class="level0"><a name="fB-LfR"></a><span class="nroffip">\fB-L\fR</span> 
<p class="level1">Speak LMTP rather than SMTP. 
<p class="level0"><a name="fB-m"></a><span class="nroffip">\fB-m \fImessage_count\fR</span> 
<p class="level1">Send the specified number of messages (default: 1). 
<p class="level0"><a name="fB-M"></a><span class="nroffip">\fB-M \fImyhostname\fR</span> 
<p class="level1">Use the specified hostname or [address] in the HELO command and in the default sender and recipient addresses, instead of the machine hostname. 
<p class="level0"><a name="fB-NfR"></a><span class="nroffip">\fB-N\fR</span> 
<p class="level1">Prepend a non-repeating sequence number to each recipient address. This avoids the artificial 100% hit rate in the resolve and rewrite client caches and exercises the trivial-rewrite daemon, better approximating Postfix performance under real-life work-loads. 
<p class="level0"><a name="fB-ofR"></a><span class="nroffip">\fB-o\fR</span> 
<p class="level1">Old mode: don't send HELO, and don't send message headers. 
<p class="level0"><a name="fB-r"></a><span class="nroffip">\fB-r \fIrecipient_count\fR</span> 
<p class="level1">Send the specified number of recipients per transaction (default: 1). Recipient names are generated by prepending a number to the recipient address. 
<p class="level0"><a name="fB-R"></a><span class="nroffip">\fB-R \fIinterval\fR</span> 
<p class="level1">Wait for a random period of time 0 &lt;= n &lt;= interval between messages. Suspending one thread does not affect other delivery threads. 
<p class="level0"><a name="fB-s"></a><span class="nroffip">\fB-s \fIsession_count\fR</span> 
<p class="level1">Run the specified number of SMTP sessions in parallel (default: 1). 
<p class="level0"><a name="fB-S"></a><span class="nroffip">\fB-S \fIsubject\fR</span> 
<p class="level1">Send mail with the named subject line (default: none). 
<p class="level0"><a name="fB-t"></a><span class="nroffip">\fB-t \fIto\fR</span> 
<p class="level1">Use the specified recipient address (default: &lt;foo@myhostname&gt;). 
<p class="level0"><a name="fB-T"></a><span class="nroffip">\fB-T \fIwindowsize\fR</span> 
<p class="level1">Override the default TCP window size. To work around broken TCP window scaling implementations, specify a value &gt; 0 and &lt; 65536. 
<p class="level0"><a name="fB-vfR"></a><span class="nroffip">\fB-v\fR</span> 
<p class="level1">Make the program more verbose, for debugging purposes. 
<p class="level0"><a name="fB-w"></a><span class="nroffip">\fB-w \fIinterval\fR</span> 
<p class="level1">Wait a fixed time between messages. Suspending one thread does not affect other delivery threads. 
<p class="level0"><a name="fBinetfRfIhostfRfIportfR"></a><span class="nroffip">[\fBinet:\fR]\fIhost\fR[:\fIport\fR]</span> 
<p class="level1">Connect via TCP to host <span Class="emphasis">host</span>, port <span Class="emphasis">port</span>. The default port is <span Class="bold">smtp</span>. 
<p class="level0"><a name="fBunixfIpathnamefR"></a><span class="nroffip">\fBunix:\fIpathname\fR</span> 
<p class="level1">Connect to the UNIX-domain socket at <span Class="emphasis">pathname</span>. <a name="BUGS"></a><h2 class="nroffsh">BUGS</h2>
<p class="level0">
<p class="level0">
<p class="level0">No SMTP command pipelining support. <a name="SEE"></a><h2 class="nroffsh">SEE ALSO</h2>
<p class="level0">
<p class="level0"><pre class="level0">
smtp-sink(1), SMTP/LMTP message dump
</pre>
<a name="LICENSE"></a><h2 class="nroffsh">LICENSE</h2>
<p class="level0">
<p class="level0"><pre class="level0">
</pre>

<p class="level0">The Secure Mailer license must be distributed with this software. <a name="AUTHORS"></a><h2 class="nroffsh">AUTHOR(S)</h2>
<p class="level0">
<p class="level0"><pre class="level0">
Wietse Venema
IBM T.J. Watson Research
P.O. Box 704
Yorktown Heights, NY 10598, USA
