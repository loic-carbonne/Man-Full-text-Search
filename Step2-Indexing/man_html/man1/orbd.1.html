
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0"><a name="Name"></a><h2 class="nroffsh">Name</h2>
<p class="level0">orbd - The Object Request Broker Daemon 
<p class="level0">
<p class="level0">f3orbd</span> is used to enable clients to transparently locate and invoke persistent objects on servers in the CORBA environment. 
<p class="level0">
<p class="level0">f3See also:</span>  
<p class="level0">f2Naming Service</span> @ 
<p class="level0"><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlNaming.html">http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlNaming.html</a> 
<p class="level0"><a name="SYNOPSIS"></a><h2 class="nroffsh">SYNOPSIS</h2>
<p class="level0">
<p class="level0"><pre class="level0">
f3
orbd &lt;</span>f3options</span>f3&gt;
</span>
</pre>

<p class="level0">
<p class="level0">
<p class="level0"><a name="DESCRIPTION"></a><h2 class="nroffsh">DESCRIPTION</h2>
<p class="level0">
<p class="level0">
<p class="level0">The Server Manager included with the f3orbd</span> tool is used to enable clients to transparently locate and invoke persistent objects on servers in the CORBA environment. The persistent servers, while publishing the persistent object references in the Naming Service, include the port number of the ORBD in the object reference instead of the port number of the Server. The inclusion of an ORBD port number in the object reference for persistent object references has the following advantages: 
<p class="level0">
<p class="level1">
<p class="level1">o The object reference in the Naming Service remains independent of the server life cycle. For example, the object reference could be published by the server in the Naming Service when it is first installed, and then, independent of how many times the server is started or shutdown, the ORBD will always return the correct object reference to the invoking client.  
<p class="level1">o The client needs to lookup the object reference in the Naming Service only once, and can keep re-using this reference independent of the changes introduced due to server life cycle.  
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">To access ORBD's Server Manager, the server must be started using servertool(1), which is a command-line interface for application programmers to register, unregister, startup, and shutdown a persistent server. For more information on the Server Manager, see the section in this document titled f2Server Manager</span>. 
<p class="level0">
<p class="level0">When f2orbd</span> starts up, it also starts a naming service. For more information on the naming service, link to  
<p class="level0">f2Naming Service</span> @ 
<p class="level0"><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlNaming.html.">http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlNaming.html.</a> 
<p class="level0"><a name="OPTIONS"></a><h2 class="nroffsh">OPTIONS</h2>
<p class="level0">
<p class="level0"><a name=""></a><h2 class="nroffsh"></h2>
<p class="level0">Required Options 
<p class="level0">
<p class="level1">
<p class="level1">-ORBInitialPort nameserverport  Specifies the port on which the name server should be started. Once started, f2orbd</span> will listen for incoming requests on this port. Note that when using Solaris software, you must become root to start a process on a port under 1024. For this reason, we recommend that you use a port number greater than or equal to 1024. (required)  
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0"><a name=""></a><h2 class="nroffsh"></h2>
<p class="level0">OTHER OPTIONS 
<p class="level0">
<p class="level1">
<p class="level1">-port port  Specifies the activation port where ORBD should be started, and where ORBD will be accepting requests for persistent objects. The default value for this port is 1049. This port number is added to the port field of the persistent Interoperable Object References (IOR). (optional)  
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level1">
<p class="level1">-defaultdb directory  Specifies the base where the ORBD persistent storage directory f2orb.db</span> is created. If this option is not specified, the default value is "./orb.db". (optional)  
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level1">
<p class="level1">-serverPollingTime milliseconds  Specifies how often ORBD checks for the health of persistent servers registered via f2servertool</span>. The default value is 1,000 ms. The value specified for f2milliseconds</span> must be a valid positive integer. (optional)  
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level1">
<p class="level1">-serverStartupDelay milliseconds  Specifies how long ORBD waits before sending a location forward exception after a persistent server that is registered via f2servertool</span> is restarted. The default value is 1,000 ms. The value specified for f2milliseconds</span> must be a valid positive integer. (optional)  
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level1">
<p class="level1">-Joption  Pass f2option</span> to the Java virtual machine, where f2option</span> is one of the options described on the reference page for java(1). For example, f3-J-Xms48m</span> sets the startup memory to 48 megabytes. It is a common convention for f3-J</span> to pass options to the underlying virtual machine.  
<p class="level1">
<p class="level1">
<p class="level0">
<p class="level0">
<p class="level0"><a name="Starting"></a><h2 class="nroffsh">Starting and Stopping the Naming Service</h2>
<p class="level0">
<p class="level0">
<p class="level0">A Naming Service is a CORBA service that allows  
<p class="level0">f2CORBA objects</span> @ 
<p class="level0"><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlGlossary.html&#35;CORBA%20object">http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlGlossary.html&#35;CORBA%20object</a> to be named by means of binding a name to an object reference. The  
<p class="level0">f2name binding</span> @ 
<p class="level0"><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlGlossary.html&#35;name%20binding">http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlGlossary.html&#35;name%20binding</a> may be stored in the naming service, and a client may supply the name to obtain the desired object reference. 
<p class="level0">
<p class="level0">Prior to running a client or a server, you will start ORBD. ORBD includes a persistent Naming Service and a transient Naming Service, both of which are an implementation of the COS Naming Service. 
<p class="level0">
<p class="level0">The f4Persistent</span>f3 Naming Service</span> provides persistence for naming contexts. This means that this information is persistent across service shutdowns and startups, and is recoverable in the event of a service failure. If ORBD is restarted, the Persistent Naming Service will restore the naming context graph, so that the binding of all clients' and servers' names remains intact (persistent). 
<p class="level0">
<p class="level0">&nbsp; 
<p class="level0">
<p class="level0">For backward compatibility, f2tnameserv</span>, a f4Transient</span>f3 Naming Service</span> shipped with older versions of the JDK, is also included in this release of J2SE. A transient naming service retains naming contexts as long as it is running. If there is a service interruption, the naming context graph is lost. 
<p class="level0">
<p class="level0">The f2-ORBInitialPort</span> argument is a required command-line argument for f2orbd</span>, and is used to set the port number on which the Naming Service will run. The following instructions assume you can use port 1050 for the Java&nbsp;IDL Object Request Broker Daemon. When using Solaris software, you must become root to start a process on a port under 1024. For this reason, we recommend that you use a port number greater than or equal to 1024. You can substitute a different port if necessary. 
<p class="level0">
<p class="level0">To start f2orbd</span> from a UNIX command shell, enter: 
<p class="level0"><pre class="level0">
f3
&nbsp; orbd -ORBInitialPort 1050&
</span>
</pre>

<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">From an MS-DOS system prompt (Windows), enter: 
<p class="level0"><pre class="level0">
f3
&nbsp; start orbd -ORBInitialPort 1050
</span>
</pre>

<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">Now that ORBD is running, you can run your server and client applications. When running the client and server applications, they must be made aware of the port number (and machine name, if applicable) where the Naming Service is running. One way to do this is to add the following code to your application: 
<p class="level0"><pre class="level0">
f3
&nbsp;       Properties props = new Properties();
&nbsp;       props.put("org.omg.CORBA.ORBInitialPort", "1050");
&nbsp;       props.put("org.omg.CORBA.ORBInitialHost", "MyHost");
&nbsp;       ORB orb = ORB.init(args, props);
</span>
</pre>

<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">In this example, the Naming Service is running on port 1050 on host "MyHost". Another way is to specify the port number and/or machine name when running the server or client application from the command line. For example, you would start your "HelloApplication" with the following command line: 
<p class="level0"><pre class="level0">
f3
&nbsp;    java HelloApplication -ORBInitialPort 1050 -ORBInitialHost MyHost
</span>
</pre>

<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">To stop the naming service, use the relevant operating system command, such as f2pkill orbd</span> on Solaris, or f2Ctrl+C</span> in the DOS window in which f2orbd</span> is running. Note that names registered with the naming service may disappear when the service is terminated if the naming service is transient. The Java IDL naming service will run until it is explicitly stopped. 
<p class="level0">
<p class="level0">For more information on the Naming Service included with ORBD, see  
<p class="level0">f2Naming Service</span> @ 
<p class="level0"><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlNaming.html.">http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlNaming.html.</a> 
<p class="level0"><a name="Server"></a><h2 class="nroffsh">Server Manager</h2>
<p class="level0">
<p class="level0">
<p class="level0">To access ORBD's Server Manager and run a persistent server, the server must be started using servertool(1), which is a command-line interface for application programmers to register, unregister, startup, and shutdown a persistent server. When a server is started using f2servertool</span>, it must be started on the same host and port on which f2orbd</span> is executing. If the server is run on a different port, the information stored in the database for local contexts will be invalid and the service will not work properly. 
<p class="level0"><a name=""></a><h2 class="nroffsh"></h2>
<p class="level0">Server Manager: an Example 
<p class="level0">
<p class="level0">Using the  
<p class="level0">f2sample tutorial</span> @ 
<p class="level0"><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlExample.html">http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlExample.html</a> for our demonstration, you would run the f2idlj</span> compiler and f2javac</span> compiler as shown in the tutorial. To run the Server Manager, follow these steps for running the application: 
<p class="level0">
<p class="level0">Start f2orbd</span>. 
<p class="level0">
<p class="level0">To start f2orbd</span> from a UNIX command shell, enter: 
<p class="level0">
<p class="level0">&nbsp; 
<p class="level0"><pre class="level0">
f3
&nbsp; orbd -ORBInitialPort 1050 
</span>
</pre>

<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">From an MS-DOS system prompt (Windows), enter: 
<p class="level0"><pre class="level0">
f3
&nbsp; start orbd -ORBInitialPort 1050
</span>
</pre>

<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">Note that f21050</span> is the port on which you want the name server to run. f2-ORBInitialPort</span> is a required command-line argument. When using Solaris software, you must become root to start a process on a port under 1024. For this reason, we recommend that you use a port number greater than or equal to 1024. 
<p class="level0">
<p class="level0">Start the f2servertool</span>: 
<p class="level0">
<p class="level0">To start the Hello server, enter: 
<p class="level0"><pre class="level0">
f3
&nbsp; servertool -ORBInitialPort 1050
</span>
</pre>

<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">Make sure the name server (f2orbd</span>) port is the same as in the previous step, for example, f2-ORBInitialPort 1050</span>. The f2servertool</span> must be started on the same port as the name server. 
<p class="level0">
<p class="level0">The f2servertool</span> command line interface appears. 
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">Start the Hello server from the f2servertool</span> prompt: 
<p class="level0"><pre class="level0">
f3
&nbsp; servertool  &gt; register -server HelloServer -classpath . -applicationName
&nbsp;               HelloServerApName
</span>
</pre>

<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">The f2servertool</span> registers the server, assigns it the name of "HelloServerApName", and displays its server id, along with a listing of all registered servers. 
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">Run the client application from another terminal window or prompt: 
<p class="level0">
<p class="level0">&nbsp; 
<p class="level0"><pre class="level0">
f3
&nbsp; java HelloClient -ORBInitialPort 1050 -ORBInitialHost localhost
</span>
</pre>

<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">For this example, you can omit f2-ORBInitialHost localhost</span> since the name server is running on the same host as the Hello client. If the name server is running on a different host, use f2-ORBInitialHost</span> f2nameserverhost</span> to specify the host on which the IDL name server is running. 
<p class="level0">
<p class="level0">Specify the name server (f2orbd</span>) port as done in the previous step, for example, f2-ORBInitialPort 1050</span>. 
<p class="level0">
<p class="level0">&nbsp; 
<p class="level0">
<p class="level0">&nbsp; 
<p class="level0">
<p class="level0">When you have finished experimenting with the Server Manager, be sure to shut down or kill the name server (f2orbd</span>) and f2servertool</span>. 
<p class="level0">
<p class="level0">To shut down f2orbd</span> from a DOS prompt, select the window that is running the server and enter f2Ctrl+C</span> to shut it down. To shut down f2orbd</span>from a Unix shell, find the process, and kill it. The server will continue to wait for invocations until it is explicitly stopped. 
<p class="level0">
<p class="level0">To shut down the f2servertool</span>, type f2quit</span> and press the f2Enter</span> key on the keyboard. 
<p class="level0"><a name="See"></a><h2 class="nroffsh">See Also</h2>
<p class="level0">
<p class="level0">
<p class="level1">
<p class="level1">o 
<p class="level1">f2Naming Service</span> @ 
<p class="level1"><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlNaming.html">http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlNaming.html</a> <br>
<p class="level1">o servertool(1)  
<p class="level0">
<p class="level0">
<p class="level0"><br>
<p class="level0">
<p class="level0">
<p class="level0">