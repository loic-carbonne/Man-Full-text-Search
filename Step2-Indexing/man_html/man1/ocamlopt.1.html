
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0">
<p class="level0"><a name="NAME"></a><h2 class="nroffsh">NAME</h2>
<p class="level0">
<p class="level0">ocamlopt - The OCaml native-code compiler 
<p class="level0"><a name="SYNOPSIS"></a><h2 class="nroffsh">SYNOPSIS</h2>
<p class="level0">
<p class="level0"><span Class="bold">ocamlopt</span> [ <span Class="emphasis">options</span> ] <span Class="emphasis">filename \ ...</span> 
<p class="level0"><span Class="bold">ocamlopt.opt</span> (same options) 
<p class="level0"><a name="DESCRIPTION"></a><h2 class="nroffsh">DESCRIPTION</h2>
<p class="level0">
<p class="level0">The OCaml high-performance native-code compiler <span Class="manpage">ocamlopt (1)</span>compiles OCaml source files to native code object files and link these object files to produce standalone executables. 
<p class="level0">The <span Class="manpage">ocamlopt (1)</span>command has a command-line interface very close to that of <span Class="manpage">ocamlc (1).</span>It accepts the same types of arguments and processes them sequentially: 
<p class="level0">Arguments ending in .mli are taken to be source files for compilation unit interfaces. Interfaces specify the names exported by compilation units: they declare value names with their types, define public data types, declare abstract data types, and so on. From the file <span Class="emphasis">x .mli,</span> the <span Class="manpage">ocamlopt (1)</span>compiler produces a compiled interface in the file <span Class="emphasis">x .cmi.</span> The interface produced is identical to that produced by the bytecode compiler <span Class="manpage">ocamlc (1).</span>
<p class="level0">Arguments ending in .ml are taken to be source files for compilation unit implementations. Implementations provide definitions for the names exported by the unit, and also contain expressions to be evaluated for their side-effects.  From the file <span Class="emphasis">x .ml,</span> the <span Class="manpage">ocamlopt (1)</span>compiler produces two files: <span Class="emphasis">x .o,</span> containing native object code, and <span Class="emphasis">x .cmx,</span> containing extra information for linking and optimization of the clients of the unit. The compiled implementation should always be referred to under the name <span Class="emphasis">x .cmx</span> (when given a .o file, <span Class="manpage">ocamlopt (1)</span>assumes that it contains code compiled from C, not from OCaml). 
<p class="level0">The implementation is checked against the interface file <span Class="emphasis">x .mli</span> (if it exists) as described in the manual for <span Class="manpage">ocamlc (1).</span>
<p class="level0">Arguments ending in .cmx are taken to be compiled object code.  These files are linked together, along with the object files obtained by compiling .ml arguments (if any), and the OCaml standard library, to produce a native-code executable program. The order in which .cmx and .ml arguments are presented on the command line is relevant: compilation units are initialized in that order at run-time, and it is a link-time error to use a component of a unit before having initialized it. Hence, a given <span Class="emphasis">x .cmx</span> file must come before all .cmx files that refer to the unit <span Class="emphasis">x .</span> 
<p class="level0">Arguments ending in .cmxa are taken to be libraries of object code. Such a library packs in two files <span Class="emphasis">lib .cmxa</span> and <span Class="emphasis">lib .a</span> a set of object files (.cmx/.o files). Libraries are build with <span Class="bold">ocamlopt -a</span> (see the description of the <span Class="bold">-a</span> option below). The object files contained in the library are linked as regular .cmx files (see above), in the order specified when the library was built. The only difference is that if an object file contained in a library is not referenced anywhere in the program, then it is not linked in. 
<p class="level0">Arguments ending in .c are passed to the C compiler, which generates a .o object file. This object file is linked with the program. 
<p class="level0">Arguments ending in .o or .a are assumed to be C object files and libraries. They are linked with the program. 
<p class="level0">The output of the linking phase is a regular Unix executable file. It does not need <span Class="manpage">ocamlrun (1)</span>to run. 
<p class="level0"><span Class="bold">ocamlopt.opt</span> is the same compiler as <span Class="manpage">ocamlopt</span>but compiled with itself instead of with the bytecode compiler <span Class="manpage">ocamlc (1).</span>Thus, it behaves exactly like <span Class="manpage">ocamlopt</span>but compiles faster. <span Class="bold">ocamlopt.opt</span> is not available in all installations of OCaml. 
<p class="level0"><a name="OPTIONS"></a><h2 class="nroffsh">OPTIONS</h2>
<p class="level0">
<p class="level0">The following command-line options are recognized by <span Class="manpage">ocamlopt (1).</span>
<p class="level0"><span Class="bold">-a</span> Build a library (.cmxa/.a file) with the object files (.cmx/.o files) given on the command line, instead of linking them into an executable file. The name of the library must be set with the <span Class="bold">-o</span> option. 
<p class="level0">If <span Class="manpage">-cclib \ or \ -ccopt</span>options are passed on the command line, these options are stored in the resulting .cmxa library.  Then, linking with this library automatically adds back the <span Class="manpage">-cclib \ and \ -ccopt</span>options as if they had been provided on the command line, unless the <span Class="bold">-noautolink</span> option is given. 
<p class="level0"><span Class="bold">-absname</span> Show absolute filenames in error messages. 
<p class="level0"><span Class="bold">-annot</span> Dump detailed information about the compilation (types, bindings, tail-calls, etc).  The information for file <span Class="emphasis">src .ml</span> is put into file <span Class="emphasis">src .annot.</span> In case of a type error, dump all the information inferred by the type-checker before the error. The <span Class="emphasis">src .annot</span> file can be used with the emacs commands given in <span Class="bold">emacs/caml-types.el</span> to display types and other annotations interactively. 
<p class="level0"><span Class="bold">-bin-annot</span> Dump detailed information about the compilation (types, bindings, tail-calls, etc) in binary format. The information for file <span Class="emphasis">src .ml</span> is put into file <span Class="emphasis">src .cmt.</span> In case of a type error, dump all the information inferred by the type-checker before the error. The annotation files produced by <span Class="bold">-bin-annot</span> contain more information and are much more compact than the files produced by <span Class="manpage">-annot .</span>
<p class="level0"><span Class="bold">-c</span> Compile only. Suppress the linking phase of the compilation. Source code files are turned into compiled files, but no executable file is produced. This option is useful to compile modules separately. 
<p class="level0"><span Class="bold">-cc \ ccomp</span> Use <span Class="emphasis">ccomp</span> as the C linker called to build the final executable and as the C compiler for compiling .c source files. 
<p class="level0"><span Class="bold">-cclib\ -l libname</span> Pass the <span Class="bold">-l libname</span> option to the linker. This causes the given C library to be linked with the program. 
<p class="level0"><span Class="bold">-ccopt \ option</span> Pass the given option to the C compiler and linker. For instance, <span Class="bold">-ccopt\ -L dir</span> causes the C linker to search for C libraries in directory <span Class="emphasis">dir .</span> 
<p class="level0"><span Class="bold">-compact</span> Optimize the produced code for space rather than for time. This results in smaller but slightly slower programs. The default is to optimize for speed. 
<p class="level0"><span Class="bold">-config</span> Print the version number of <span Class="manpage">ocamlopt (1)</span>and a detailed summary of its configuration, then exit. 
<p class="level0"><span Class="bold">-for-pack \ module-path</span> Generate an object file (.cmx and .o files) that can later be included as a sub-module (with the given access path) of a compilation unit constructed with <span Class="manpage">-pack .</span>For instance, <span Class="bold">ocamlopt\ -for-pack\ P\ -c\ A.ml</span> will generate a.cmx and a.o files that can later be used with <span Class="manpage">ocamlopt -pack -o P.cmx a.cmx .</span>
<p class="level0"><span Class="bold">-g</span> Add debugging information while compiling and linking. This option is required in order to produce stack backtraces when the program terminates on an uncaught exception (see <span Class="manpage">ocamlrun (1)).</span>
<p class="level0"><span Class="bold">-i</span> Cause the compiler to print all defined names (with their inferred types or their definitions) when compiling an implementation (.ml file). No compiled files (.cmo and .cmi files) are produced. This can be useful to check the types inferred by the compiler. Also, since the output follows the syntax of interfaces, it can help in writing an explicit interface (.mli file) for a file: just redirect the standard output of the compiler to a .mli file, and edit that file to remove all declarations of unexported names. 
<p class="level0"><span Class="bold">-I \ directory</span> Add the given directory to the list of directories searched for compiled interface files (.cmi) and compiled object code files (.cmo). By default, the current directory is searched first, then the standard library directory. Directories added with -I are searched after the current directory, in the order in which they were given on the command line, but before the standard library directory. 
<p class="level0">If the given directory starts with <span Class="manpage">+</span>it is taken relative to the standard library directory. For instance, <span Class="bold">-I\ +labltk</span> adds the subdirectory <span Class="bold">labltk</span> of the standard library to the search path. 
<p class="level0"><span Class="bold">-impl \ filename</span> Compile the file <span Class="emphasis">filename</span> as an implementation file, even if its extension is not .ml. 
<p class="level0"><span Class="bold">-inline \ n</span> Set aggressiveness of inlining to <span Class="emphasis">n ,</span> where <span Class="emphasis">n</span> is a positive integer. Specifying <span Class="bold">-inline 0</span> prevents all functions from being inlined, except those whose body is smaller than the call site. Thus, inlining causes no expansion in code size. The default aggressiveness, <span Class="manpage">-inline\ 1</span>allows slightly larger functions to be inlined, resulting in a slight expansion in code size. Higher values for the <span Class="bold">-inline</span> option cause larger and larger functions to become candidate for inlining, but can result in a serious increase in code size. 
<p class="level0"><span Class="bold">-intf \ filename</span> Compile the file <span Class="emphasis">filename</span> as an interface file, even if its extension is not .mli. 
<p class="level0"><span Class="bold">-intf-suffix \ string</span> Recognize file names ending with <span Class="emphasis">string</span> as interface files (instead of the default .mli). 
<p class="level0"><span Class="bold">-labels</span> Labels are not ignored in types, labels may be used in applications, and labelled parameters can be given in any order.  This is the default. 
<p class="level0"><span Class="bold">-linkall</span> Force all modules contained in libraries to be linked in. If this flag is not given, unreferenced modules are not linked in. When building a library 
<p class="level0">flag), setting the <span Class="bold">-linkall</span> flag forces all subsequent links of programs involving that library to link all the modules contained in the library. 
<p class="level0"><span Class="bold">-no-app-funct</span> Deactivates the applicative behaviour of functors. With this option, each functor application generates new types in its result and applying the same functor twice to the same argument yields two incompatible structures. 
<p class="level0"><span Class="bold">-noassert</span> Do not compile assertion checks.  Note that the special form <span Class="bold">assert\ false</span> is always compiled because it is typed specially. This flag has no effect when linking already-compiled files. 
<p class="level0"><span Class="bold">-noautolink</span> When linking .cmxa libraries, ignore <span Class="manpage">-cclib \ and \ -ccopt</span>options potentially contained in the libraries (if these options were given when building the libraries).  This can be useful if a library contains incorrect specifications of C libraries or C options; in this case, during linking, set <span Class="bold">-noautolink</span> and pass the correct C libraries and options on the command line. 
<p class="level0"><span Class="bold">-nodynlink</span> Allow the compiler to use some optimizations that are valid only for code that is never dynlinked. 
<p class="level0"><span Class="bold">-nolabels</span> Ignore non-optional labels in types. Labels cannot be used in applications, and parameter order becomes strict. 
<p class="level0"><span Class="bold">-o \ exec-file</span> Specify the name of the output file produced by the linker. The default output name is a.out, in keeping with the Unix tradition. If the <span Class="bold">-a</span> option is given, specify the name of the library produced. If the <span Class="bold">-pack</span> option is given, specify the name of the packed object file produced. If the <span Class="bold">-output-obj</span> option is given, specify the name of the output file produced. If the <span Class="bold">-shared</span> option is given, specify the name of plugin file produced. 
<p class="level0"><span Class="bold">-output-obj</span> Cause the linker to produce a C object file instead of an executable file. This is useful to wrap OCaml code as a C library, callable from any C program. The name of the output object file must be set with the <span Class="bold">-o</span> option. This option can also be used to produce a compiled shared/dynamic library (.so extension). 
<p class="level0"><span Class="bold">-p</span> Generate extra code to write profile information when the program is executed.  The profile information can then be examined with the analysis program <span Class="manpage">gprof (1).</span>The <span Class="bold">-p</span> option must be given both at compile-time and at link-time.  Linking object files not compiled with <span Class="bold">-p</span> is possible, but results in less precise profiling. 
<p class="level0">See the <span Class="manpage">gprof (1)</span>man page for more information about the profiles. 
<p class="level0">Full support for <span Class="manpage">gprof (1)</span>is only available for certain platforms (currently: Intel x86/Linux and Alpha/Digital Unix). On other platforms, the <span Class="bold">-p</span> option will result in a less precise profile (no call graph information, only a time profile). 
<p class="level0"><span Class="bold">-pack</span> Build an object file (.cmx and .o files) and its associated compiled interface (.cmi) that combines the .cmx object files given on the command line, making them appear as sub-modules of the output .cmx file.  The name of the output .cmx file must be given with the <span Class="bold">-o</span> option.  For instance, <span Class="bold">ocamlopt\ -pack\ -o\ P.cmx\ A.cmx\ B.cmx\ C.cmx</span> generates compiled files P.cmx, P.o and P.cmi describing a compilation unit having three sub-modules A, B and C, corresponding to the contents of the object files A.cmx, B.cmx and C.cmx.  These contents can be referenced as P.A, P.B and P.C in the remainder of the program. 
<p class="level0">The .cmx object files being combined must have been compiled with the appropriate <span Class="bold">-for-pack</span> option.  In the example above, A.cmx, B.cmx and C.cmx must have been compiled with <span Class="manpage">ocamlopt\ -for-pack\ P .</span>
<p class="level0">Multiple levels of packing can be achieved by combining <span Class="bold">-pack</span> with <span Class="manpage">-for-pack .</span>See <span Class="emphasis">The OCaml user's manual ,</span> chapter "Native-code compilation" for more details. 
<p class="level0"><span Class="bold">-pp \ command</span> Cause the compiler to call the given <span Class="emphasis">command</span> as a preprocessor for each source file. The output of <span Class="emphasis">command</span> is redirected to an intermediate file, which is compiled. If there are no compilation errors, the intermediate file is deleted afterwards. 
<p class="level0"><span Class="bold">-ppx \ command</span> After parsing, pipe the abstract syntax tree through the preprocessor <span Class="emphasis">command .</span> The format of the input and output of the preprocessor are not yet documented. 
<p class="level0"><span Class="bold">-principal</span> Check information path during type-checking, to make sure that all types are derived in a principal way. All programs accepted in <span Class="bold">-principal</span> mode are also accepted in default mode with equivalent types, but different binary signatures. 
<p class="level0"><span Class="bold">-rectypes</span> Allow arbitrary recursive types during type-checking.  By default, only recursive types where the recursion goes through an object type are supported. Note that once you have created an interface using this flag, you must use it again for all dependencies. 
<p class="level0"><span Class="bold">-runtime-variant \ suffix</span> Add <span Class="emphasis">suffix</span> to the name of the runtime library that will be used by the program. If OCaml was configured with option <span Class="manpage">-with-debug-runtime</span>then the <span Class="bold">d</span> suffix is supported and gives a debug version of the runtime. 
<p class="level0"><span Class="bold">-S</span> Keep the assembly code produced during the compilation. The assembly code for the source file <span Class="emphasis">x .ml</span> is saved in the file <span Class="emphasis">x .s.</span> 
<p class="level0"><span Class="bold">-shared</span> Build a plugin (usually .cmxs) that can be dynamically loaded with the <span Class="bold">Dynlink</span> module. The name of the plugin must be set with the <span Class="bold">-o</span> option. A plugin can include a number of OCaml modules and libraries, and extra native objects (.o, .a files). Building native plugins is only supported for some operating system. Under some systems (currently, only Linux AMD 64), all the OCaml code linked in a plugin must have been compiled without the <span Class="bold">-nodynlink</span> flag. Some constraints might also apply to the way the extra native objects have been compiled (under Linux AMD 64, they must contain only position-independent code). 
<p class="level0"><span Class="bold">-short-paths</span> When a type is visible under several module-paths, use the shortest one when printing the type's name in inferred interfaces and error and warning messages. 
<p class="level0"><span Class="bold">-strict-sequence</span> The left-hand part of a sequence must have type unit. 
<p class="level0"><span Class="bold">-thread</span> Compile or link multithreaded programs, in combination with the system threads library described in <span Class="emphasis">The OCaml user's manual .</span> 
<p class="level0"><span Class="bold">-unsafe</span> Turn bound checking off for array and string accesses (the <span Class="manpage">v.(i) and s.[i]</span>constructs). Programs compiled with <span Class="bold">-unsafe</span> are therefore faster, but unsafe: anything can happen if the program accesses an array or string outside of its bounds. Additionally, turn off the check for zero divisor in integer division and modulus operations. With <span Class="manpage">-unsafe</span>an integer division (or modulus) by zero can halt the program or continue with an unspecified result instead of raising a <span Class="bold">Division_by_zero</span> exception. 
<p class="level0"><span Class="bold">-v</span> Print the version number of the compiler and the location of the standard library directory, then exit. 
<p class="level0"><span Class="bold">-verbose</span> Print all external commands before they are executed, in particular invocations of the assembler, C compiler, and linker. 
<p class="level0"><span Class="manpage">-vnum or -version</span>Print the version number of the compiler in short form (e.g. "3.11.0"), then exit. 
<p class="level0"><span Class="bold">-w \ warning-list</span> Enable, disable, or mark as fatal the warnings specified by the argument <span Class="emphasis">warning-list .</span> See <span Class="manpage">ocamlc (1)</span>for the syntax of <span Class="emphasis">warning-list .</span> 
<p class="level0"><span Class="bold">-warn-error \ warning-list</span> Mark as fatal the warnings specified in the argument <span Class="emphasis">warning-list .</span> The compiler will stop with an error when one of these warnings is emitted.  The <span Class="emphasis">warning-list</span> has the same meaning as for the <span Class="bold">-w</span> option: a <span Class="bold">+</span> sign (or an uppercase letter) marks the corresponding warnings as fatal, a <span Class="bold">-</span> sign (or a lowercase letter) turns them back into non-fatal warnings, and a <span Class="bold">@</span> sign both enables and marks as fatal the corresponding warnings. 
<p class="level0">Note: it is not recommended to use the <span Class="bold">-warn-error</span> option in production code, because it will almost certainly prevent compiling your program with later versions of OCaml when they add new warnings. 
<p class="level0">The default setting is <span Class="bold">-warn-error\ -a (all warnings are non-fatal).</span> 
<p class="level0"><span Class="bold">-warn-help</span> Show the description of all available warning numbers. 
<p class="level0">
<p class="level0"><span Class="bold">-where</span> Print the location of the standard library, then exit. 
<p class="level0"><span Class="bold">- \ file</span> Process <span Class="emphasis">file</span> as a file name, even if it starts with a dash (-) character. 
<p class="level0"><span Class="manpage">-help \ or \ --help</span>Display a short usage summary and exit. 
<p class="level0"><a name="OPTIONS"></a><h2 class="nroffsh">OPTIONS FOR THE IA32 ARCHITECTURE</h2>
<p class="level0">
<p class="level0">The IA32 code generator (Intel Pentium, AMD Athlon) supports the following additional option: 
<p class="level0"><span Class="bold">-ffast-math</span> Use the IA32 instructions to compute trigonometric and exponential functions, instead of calling the corresponding library routines.  The functions affected are: <span Class="manpage">atan</span>, <span Class="manpage">atan2</span>, <span Class="manpage">cos</span>, <span Class="manpage">log</span>, <span Class="manpage">log10</span>, <span Class="manpage">sin</span><span Class="bold">sqrt</span> and <span Class="manpage">tan .</span>The resulting code runs faster, but the range of supported arguments and the precision of the result can be reduced.  In particular, trigonometric operations <span Class="manpage">cos</span>, <span Class="manpage">sin</span><span Class="bold">tan</span> have their range reduced to [-2^64, 2^64]. 
<p class="level0"><a name="OPTIONS"></a><h2 class="nroffsh">OPTIONS FOR THE AMD64 ARCHITECTURE</h2>
<p class="level0">
<p class="level0">The AMD64 code generator (64-bit versions of Intel Pentium and AMD Athlon) supports the following additional options: 
<p class="level0"><span Class="bold">-fPIC</span> Generate position-independent machine code.  This is the default. 
<p class="level0"><span Class="bold">-fno-PIC</span> Generate position-dependent machine code. 
<p class="level0"><a name="OPTIONS"></a><h2 class="nroffsh">OPTIONS FOR THE SPARC ARCHITECTURE</h2>
<p class="level0">The Sparc code generator supports the following additional options: 
<p class="level0"><span Class="bold">-march=v8</span> Generate SPARC version 8 code. 
<p class="level0"><span Class="bold">-march=v9</span> Generate SPARC version 9 code. 
<p class="level0">The default is to generate code for SPARC version 7, which runs on all SPARC processors. 
<p class="level0"><a name="SEE"></a><h2 class="nroffsh">SEE ALSO</h2>
<p class="level0"><span Class="manpage">ocamlc (1).</span><br><span Class="emphasis">The OCaml user's manual ,</span> chapter "Native-code compilation". 